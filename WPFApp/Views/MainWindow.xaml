<Window x:Class="WPFApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WPFApp"
        xmlns:dto="clr-namespace:DTOs"
        xmlns:controls="clr-namespace:WPFApp.Views.Controls"
        Title="Videogames" Height="800" Width="1400"
        WindowStartupLocation="CenterScreen"
        Style="{StaticResource CustomWindowStyle}"
        Icon="/Assets/app_icon.png"
        Background="{DynamicResource BackgroundBrush}">
    <DockPanel LastChildFill="True">

        <controls:NavBarControl DockPanel.Dock="Top"
                                DataContext="{Binding NavbarVM}"/>

        <controls:SidebarControl DockPanel.Dock="Left"
                                 DataContext="{Binding SidebarVM}"/>

        <DockPanel>

            <controls:FilterControl DockPanel.Dock="Top" Margin="0,0,0,10"/>

            <controls:PaginationControl DockPanel.Dock="Bottom" 
                                        DataContext="{Binding PaginationVM}"
                                        Margin="0,10,0,10"/>

            <Border Margin="10" BorderThickness="0"  VerticalAlignment="Center">
                <ScrollViewer VerticalScrollBarVisibility="Hidden" Padding="0,0,10,0">
                    <ItemsControl ItemsSource="{Binding Games}">

                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <WrapPanel HorizontalAlignment="Left"/>
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>

                        <ItemsControl.ItemTemplate>
                            <DataTemplate DataType="{x:Type dto:GameDTOWithId}">

                                <Button Command="{Binding RelativeSource={RelativeSource AncestorType={x:Type Window}}, Path=DataContext.GameSelectedCommand}"
                                        CommandParameter="{Binding}" 
                                        Cursor="Hand"
                                        Margin="5">
                                    <Button.Template>
                                        <ControlTemplate TargetType="Button">
                                            <ContentPresenter/>

                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsPressed" Value="True">
                                                    <Setter Property="Opacity" Value="0.8"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Button.Template>

                                    <local:GameCard/>
                                </Button>

                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </ScrollViewer>
            </Border>

        </DockPanel>
    </DockPanel>
</Window>